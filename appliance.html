<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <title>WahuShop - Appliance</title>
  <link rel="stylesheet" href="cata.css" />
</head>

<body>

   <header>
    <div class="logo"><img src="image/WhatsApp Image 2025-07-30 at 22.14.43_da49cc2e.jpg" style="width: 100px; padding-top: 10px; border-radius:5px;"></div>
   <div style="display: flex; align-items: center;">
  <i class="fas fa-location-dot" style="color: red; margin-right: 5px;"></i>
  <div id="addressText" style="color: aliceblue; font-size: xx-small; padding-right: 20px;"></div>
</div>
  </header>

  <a href="products.html">
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search shoes..." />
  </div>
</a>

 <section class="hero">
    <h1>Buy ₹1000 ,<strong>Get Coupon ₹100</strong></h1>
    
    <p>Your destination for the best Fashoin Dresses and Get Coupon!</p>
    <a href="products.html" class="btn">Shop Now</a>
  </section>


  <section class="homeappliance-product">
    <h2>Appliance Collection</h2>
    <div class="product-grid" id="homeappliance-list">
      <!-- Shoes products will load here -->
    </div>
  </section>

<section class="featured-products">
    <h2>Featured Products</h2>
    <div class="product-grid" id="product-list">
      <!-- Products will be loaded here via JavaScript -->
    </div>
  </section>


  <footer>
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item">
        <i class="fas fa-home" style="color: green;"></i>
        <span>Home</span>
      </a>
      <a href="products.html" class="nav-item">
        <i class="fas fa-box-open"></i>
        <span>Products</span>
      </a>
      <a href="cart.html" class="nav-item">
        <i class="fas fa-shopping-cart"></i>
        <span>Cart</span>
      </a>

      <a href="orders.html" class="nav-item">
        <i class="fas fa-receipt"></i>
        <span>Orders</span>
      </a>

      <a href="login.html" class="nav-item" id="userLinks">
        <span id="userLinks">Login </span>
      </a>
    </nav>
  </footer>
  <script src="script.js"></script>
  <script>
    const homeapplianceList = document.getElementById("homeappliance-list");

    fetch("http://localhost:5000/api/homeappliance")
      .then(res => res.json())
      .then(products => {
        if (!products.length) {
          homeappliance.innerHTML = "<p>No homeappliance products found.</p>";
          return;
        }

        homeapplianceList.innerHTML = "";
        products.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';
          const original = product.originalprice || product.originalPrice;
          const discount = calculateDiscount(product.price, original);

         card.innerHTML = `
  <div class="div11" style="position: relative;">
    <a href="product.html?id=${product._id}" style="position: relative; display: block;">
      <img src="${product.image}" alt="${product.name}" style="width: 100%; border-radius: 5px;" />
    

    <!-- ❤️ Wishlist Icon -->
    <i class="fas fa-heart wishlist-icon" 
      onclick="toggleWishlist('${product._id}')" 
      style="position: absolute; top: 10px; right: 10px; color: white; background-color: rgba(0,0,0,0.5); padding: 5px; border-radius: 50%; font-size: 16px; cursor: pointer;">
    </i>
</a>
    <h3 style="color: grey;">${product.name}</h3>
    <b>★★★★☆</b>
    <p>
      ${discount > 0 ? `<span style="color:red; font-size: 12px; background-color:yellow; padding: 2px 5px; border-radius:3px;">${discount}% OFF</span>` : ''}
      ${original ? `<span style="color:gray; font-size:12px; text-decoration:line-through;">₹${original}</span>` : ''}
      ₹${product.price}
    </p>
    <h4>${product.title}</h4>
    <button onclick="window.location.href='product.html?id=${product._id}'" style="margin-top: 5px;">View Product</button>
  </div>
`;

          homeapplianceList.appendChild(card);
        });
      })
      .catch(err => {
        console.error("Error loading homeappliance products:", err);
        homeapplianceList.innerHTML = "<p>Error loading homeappliance products.</p>";
      });

    function calculateDiscount(price, original) {
      if (!original || original <= price) return 0;
      return Math.round(((original - price) / original) * 100);
    }

    function addToCart(id, image, name, price) {
      // You can implement this function as needed
      alert("Added to cart: " + name);
    }


    fetch(`http://localhost:5000/api/wishlist/toggle`, {

    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${token}`
    }
  })
  .then(res => res.json())
  .then(data => {
    alert("Added to wishlist!");
  })
  .catch(err => {
    console.error(err);
    alert("Error adding to wishlist.");
  });


  </script>

  <script>
    const userLinks = document.getElementById("userLinks");
    const token = localStorage.getItem("token");

   if (token) {
      userLinks.innerHTML = `
    
    <a href="profile.html"><i class="fas fa-user"></i><br>Profile</a>
    
  `;
    } else {
      userLinks.innerHTML = `
    
    <a href="login.html"><i class="fas fa-user"></i><br>Login</a>
    
     `;
    }

    function logout() {
      localStorage.removeItem("token");
      localStorage.removeItem("user");
      alert("Logged out");
      window.location.href = "index.html";
    }


    
    
  </script>
</body>
</html>
